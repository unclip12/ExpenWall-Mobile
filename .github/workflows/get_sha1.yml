name: Get SHA-1 Fingerprint

on:
  workflow_dispatch:

jobs:
  get-sha1:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: Make gradlew executable
        run: chmod +x gradlew

      - name: Get SHA-1 from debug keystore
        run: |
          echo "========================================"
          echo "SHA-1 FINGERPRINTS FOR GOOGLE OAUTH"
          echo "========================================"
          ./gradlew signingReport
          echo "========================================"
          echo "COPY THE SHA1 VALUE FROM ABOVE"
          echo "Look for 'SHA1:' under 'Variant: debug'"
          echo "========================================"

      - name: Also get default Android debug keystore SHA-1
        run: |
          echo "\n========================================"
          echo "DEFAULT ANDROID DEBUG KEYSTORE SHA-1:"
          echo "========================================"
          if [ -f ~/.android/debug.keystore ]; then
            keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android | grep SHA1
          else
            echo "Default debug keystore not found (normal for GitHub Actions)"
          fi
          echo "========================================"
